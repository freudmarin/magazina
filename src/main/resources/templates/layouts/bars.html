<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.thymeleaf.org">

<body>

<!-- Flash -->
<div th:fragment="flash" th:if="${session.flash != null}" class="container">
    <div class="message">
        <i class="right material-icons" data-close="" style="vertical-align: bottom;">close</i>
        <span th:text="${session.flash}" class="flash"></span>
    </div>
</div>
<!-- End Flash -->

<!-- Sidebar -->
<div th:fragment="sidebar">
    <div class="sidebar" data-color="white" data-background-color="red" data-image="/images/sidebar-1.jpg">
        <div class="logo">
            <a href="/" class="simple-text logo-normal">
                Magazina
            </a>
        </div>
        <div class="sidebar-wrapper">
            <ul class="nav">
                <li class="nav-item"
                    th:classappend="${#httpServletRequest.requestURI.contains('warehouses')} ? 'active' : ''">
                    <a class="nav-link" th:href="@{/warehouses}">
                        <i class="material-icons">dashboard</i>
                        <p>Magazinat</p>
                    </a>
                </li>
                <li class="nav-item"
                    th:classappend="${#httpServletRequest.requestURI.contains('categories')} ? 'active' : ''">
                    <a class="nav-link" th:href="@{/categories}">
                        <i class="material-icons">content_paste</i>
                        <p>Kategorit&#235</p>
                    </a>
                </li>
                <li class="nav-item "
                    th:classappend="${#httpServletRequest.requestURI.contains('products')} ? 'active' : ''">
                    <a class="nav-link" th:href="@{/products}">
                        <i class="material-icons">library_books</i>
                        <p>Produktet</p>
                    </a>
                </li>
                <li class="nav-item "
                    th:classappend="${#httpServletRequest.requestURI.contains('supplies')} ? 'active' : ''">
                    <a class="nav-link" th:href="@{/supplies}">
                        <i class="material-icons">bubble_chart</i>
                        <p>Furnizimet</p>
                    </a>
                </li>
                <li class="nav-item "
                    th:classappend="${#httpServletRequest.requestURI.contains('sales')} ? 'active' : ''">
                    <a class="nav-link" th:href="@{/sales}">
                        <i class="material-icons">bubble_chart</i>
                        <p>Shitjet</p>
                    </a>
                </li>
                <li class="nav-item "
                    th:classappend="${#httpServletRequest.requestURI.contains('suppliers')} ? 'active' : ''">
                    <a class="nav-link" th:href="@{/suppliers}">
                        <i class="material-icons">person</i>
                        <p>Furnitor&#235t</p>
                    </a>
                </li>
                <li class="nav-item "
                    th:classappend="${#httpServletRequest.requestURI.contains('customers')} ? 'active' : ''">
                    <a class="nav-link" th:href="@{/customers}">
                        <i class="material-icons">person</i>
                        <p>Klient&#235t</p>
                    </a>
                </li>
            </ul>
        </div>
        <div class="sidebar-background" style="background-image: url('/images/sidebar.jpg')"></div>
    </div>
</div>
<!-- End Sidebar -->

<!-- Navbar -->
<nav th:fragment="navbar" class="navbar navbar-expand-lg navbar-transparent navbar-absolute fixed-top ">
    <div class="container-fluid">
        <div class="navbar-wrapper">
            <a class="navbar-brand" th:if="${#httpServletRequest.requestURI.contains('categories')}"> Kategori </a>
            <a class="navbar-brand" th:if="${#httpServletRequest.requestURI.contains('warehouses')}"> Magazina </a>
            <a class="navbar-brand" th:if="${#httpServletRequest.requestURI.contains('products')}"> Produkte </a>
            <a class="navbar-brand" th:if="${#httpServletRequest.requestURI.contains('sales')}"> Shitje </a>
            <a class="navbar-brand" th:if="${#httpServletRequest.requestURI.contains('agents')}"> Agjentet </a>
            <a class="navbar-brand" th:if="${#httpServletRequest.requestURI.length() == 1}"> Dashboard </a>
        </div>
        <button class="navbar-toggler" type="button" data-toggle="collapse" aria-controls="navigation-index" aria-expanded="false" aria-label="Toggle navigation">
            <span class="sr-only">Toggle navigation</span>
            <span class="navbar-toggler-icon icon-bar"></span>
            <span class="navbar-toggler-icon icon-bar"></span>
            <span class="navbar-toggler-icon icon-bar"></span>
        </button>
        <div class="collapse navbar-collapse justify-content-end">
            <ul class="navbar-nav">
                <li class="nav-item dropdown">
                    <a class="nav-link" href="#" id="navbarWarehouse" data-toggle="dropdown" aria-haspopup="true" aria-expanded="true">
                        <i class="fas fa-warehouse"></i>
                        <p class="d-lg-none d-md-block">
                            Magazinat
                        </p>
                    </a>
                    <div class="dropdown-menu dropdown-menu-right" aria-labelledby="navbarDropdownMenuLink">
                        <a th:each="warehouse : ${warehouses}"
                           th:href="@{|/warehouses/checkout/${warehouse.id}|}"
                           th:text="${warehouse.name}" class="dropdown-item"
                           th:classappend="${warehouse.name == currentWarehouse.name} ? 'active' : ''"></a>
                    </div>
                </li>
                <li class="nav-item dropdown">
                    <a class="nav-link" href="#" id="navbarDropdownProfile" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
                        <i class="material-icons">person</i>
                        <p class="d-lg-none d-md-block">
                            Llogaria
                        </p>
                    </a>
                    <div class="dropdown-menu dropdown-menu-right" aria-labelledby="navbarDropdownProfile">
                        <a class="dropdown-item" href="#" onclick="void(0)"
                           th:text="${#authentication.principal.username}"></a>
                        <div class="dropdown-divider"></div>
                        <form th:action="@{/logout}" method="post">
                            <button class="dropdown-item" type="submit">Dil</button>
                        </form>
                    </div>
                </li>
            </ul>
        </div>
    </div>
</nav>
<!-- End Navbar -->
</body>
</html>